<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Python - Joysisyphus Blog
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="Joysisyphus Blog" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site: ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; Joysisyphus Blog</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
  $(function(){
    $('#menu_item_index').addClass('is_active');
  });
</script>
<div class="row">
  <div class="large-8 medium-8 columns">
      <div class="markdown-body article-wrap">
       <div class="article">
          
          <h1>Python</h1>
     
        <div class="read-more clearfix">
          <span class="date">2018/2/7</span>

          
           
         
          <span class="comments">
            
              <a href="15180253213087.html#disqus_thread">comments</a>
            

            
          </span>

        </div>
      </div><!-- article -->

      <div class="article-content">
      <h2 id="toc_0">How to run the python script</h2>

<ol>
<li>3 ways to run the python script

<ul>
<li><code>./01.py</code></li>
<li><code>python 01.py</code></li>
<li><code>/usr/bin/python 01.py</code></li>
</ul></li>
<li>the simple python mode

<ul>
<li>    use <code>python</code> to enter the mode, just input the command, hit return to run, and use <code>exit()</code> to leave the mode</li>
<li>    use <code>python -c &#39;print(&quot;hello world&quot;)&#39;</code> to run the python command<br/></li>
</ul></li>
<li>put this line <code>#!/usr/bin/env python</code> at first line to denote the python version</li>
</ol>

<h2 id="toc_1">The difference between Python 2 and Python 3</h2>

<ol>
<li>Print: in python 2 you don&#39;t have to use (), in python 3 you have to use ()</li>
<li>Print arithmetic: in python 2 <code>print(2/3)</code> and <code>print(2.0/3.0)</code> have different result and in python 3 they have same result</li>
</ol>

<h2 id="toc_2">Print Command</h2>

<h3 id="toc_3">Print: Basic Part</h3>

<ol>
<li>print number: <code>print(2.141)</code></li>
<li>print strings

<ul>
<li>use <code>print (&#39;string&#39;)</code> or <code>print(&#39;&#39;string&#39;&#39;)</code> to print one line string</li>
<li>use <code>print (&#39;&#39;&#39;multi-lines string&#39;&#39;&#39;)</code> to print multi-line string</li>
</ul></li>
<li>new line and tab command: use <code>print (&#39;\n&#39;)</code> to create a new line, use <code>print (&#39;\t&#39;)</code> to create a space</li>
<li>use <code>print(r&#39;what you see is what you get\n\t\t\n&#39;)</code> to treat the command as character</li>
<li>arithmetic：<code>print(23+45)</code></li>
</ol>

<h3 id="toc_4">Print: String</h3>

<ol>
<li>string concatenation: 

<ul>
<li><code>print(&#39;23&#39;+&#39;46&#39;)</code> or <code>print(&quot;strA&#39;+&#39;strB&#39;)</code></li>
<li>if there is a string variable in print, you need to use <code>+</code> before and after this variable, like <code>print(&#39;This is a function with two arguments x: &#39; + str(x)+ &#39; and y: &#39; + str(y))</code></li>
</ul></li>
<li>logic: <code>print(a == 37)</code> <code>print(a&lt;40)</code> <code>print(a != 37)</code>, <code>not</code> <code>or</code>  <code>and</code></li>
<li>string compare:<code>&lt;</code> <code>&gt;</code>, capital case is before the lower case, a is before z</li>
<li>string function

<ul>
<li><code>string.startwith(&quot;substring&quot;)</code>,<code>string.endwith(&quot;substring&quot;)</code>give true or false</li>
<li><code>&quot;substring&quot; in string</code> give true or false</li>
<li><code>len(string)</code> give the length of the string</li>
<li><code>string.find(&quot;substring)</code> give the position of the substring, index begin from 0</li>
<li><code>string.replace(&quot;strA&quot;,&quot;strB)</code> use strB to replace strA in string</li>
</ul></li>
<li>format

<ul>
<li><code>&#39;%15.8f&#39; % 2.34</code>:give the float point format for a number, 15 is the total width, 8 is the precision, f is the float number</li>
<li><code>&#39;%5d&#39; % 34</code> : 5 is the total width, d is for integer format</li>
<li><code>&#39;%10s&#39; % string</code>: give the string in string format, 10 is the total width, s is the string format, <code>%10s</code> give the right-justified, <code>%-10s</code> give the left-justified</li>
<li><code>&#39;%10s %10d&#39; % (&quot;hello&quot;,23)</code>: multiple formats</li>
<li><code>&#39;%05d&#39; % 34</code>: pad with 0, put zero before the number</li>
<li><code>&#39;%12s %12s %12s&#39; % (&#39;a&#39;,&#39;little&#39;,&#39;table&#39;)</code> use this way to create a table</li>
</ul></li>
</ol>

<h2 id="toc_5">List</h2>

<h3 id="toc_6">Basic Part</h3>

<ol>
<li>create: <code>a=[&#39;strA&#39;,&#39;strB&#39;,38,89]</code></li>
<li>single element: <code>a[0]</code> <code>a[4]</code> <code>a[-1], a[-2]</code> last 1 and last 2</li>
<li>slice of a list

<ul>
<li><code>print(a[1:3])</code>:from first index (included) to last index (excluded), print a[1], a[2]</li>
<li><code>print(a[4:])</code>:print from a[4] to the end</li>
<li><code>print(a[:5])</code>:print from a[0] to a[4]</li>
<li><code>print(a[:])</code>: print the whole list</li>
</ul></li>
<li>range of list:

<ul>
<li><code>print(list(range(23))</code>:0 through 22</li>
<li><code>print(list(range(1,10)))</code> :1 through 9 </li>
<li><code>print(list(range(0,31,5)))</code>:0 through 30 by 5&#39;s</li>
<li>use <code>[]</code> and <code>()</code> to create a range is different, use <code>()</code> the list can only be numbers, use <code>[]</code> the list element can be replaced by string</li>
</ul></li>
<li>copy: 

<ul>
<li><code>listB=listA</code> B is the copy of A, A changes B would change automatically</li>
<li><code>listB=listA[:]</code> B equal A, but if A changes, B would not change with A</li>
</ul></li>
</ol>

<h3 id="toc_7">Change a List</h3>

<ol>
<li>put element in the end of a list: <code>list.append(a)</code></li>
<li>put a sublist in the end of a list:<code>list.extend(sublist)</code>, if use <code>list.append(sublist)</code>, it will put the sublist as an element in the end of list</li>
<li>insert an element in a certain position in a list: <code>list.insert(0,a)</code>, put <code>a</code> in the beginning of the list</li>
<li>remove (and return) last element from list: <code>b = a.pop()</code>, b=last element of a, and a lose its last element</li>
<li>delete:<code>del a[2]</code> <code>del a[0:4]</code></li>
<li>list concatenation: <code>c = a+b</code></li>
<li>reverse a list: <code>list.reverse()</code> </li>
<li>sort a list in alphabet order: <code>list.sort()</code>, if I want to sort a list in reverse alphabet order, I need first sort it ,and then reverse it</li>
<li>map a function to every element of a list:

<ul>
<li><code>listB = map(float,listA)</code></li>
<li><code>listB = [float(x) for x in listA]</code> or <code>listB=[str(x)+&#39;hi&#39; for x in listA]</code></li>
</ul></li>
</ol>

<h2 id="toc_8">Dictionary</h2>

<ol>
<li>create: <code>d = {&#39;key1&#39;:&#39;value1&#39;, &#39;key2&#39;:&#39;value2&#39;, &#39;key3&#39;:&#39;value3&#39;}</code></li>
<li>retrieve a value: <code>print(d[&#39;key1&#39;])</code></li>
<li>get a list of keys or values

<ul>
<li><code>print(d.keys())</code></li>
<li><code>print(d.values())</code></li>
</ul></li>
<li>change a dictionary

<ul>
<li>add an item: <code>d[&#39;key5&#39;] = &#39;something else&#39;</code></li>
<li>overwrite an item:<code>d[&#39;key1&#39;] = &#39;something else&#39;</code></li>
<li>delete an item:<code>del d[&#39;key1&#39;]</code></li>
</ul></li>
<li>dictionary comprehension: <code>d = {s: len(s) for s in [&#39;hi&#39;,&#39;there&#39;,&#39;everyone&#39;]}</code> create a dictionary with string as key, and length of the string as values</li>
</ol>

<h2 id="toc_9">Control Flow</h2>

<h4 id="toc_10">syntax notice:</h4>

<ul>
<li> <code>:</code> is mandatory</li>
<li>unlike C use <code>{}</code> to denote the level, in python use space increment to denote the level, just use <code>Tab</code> to create a new level, lines with same space increment are in same level</li>
</ul>

<h3 id="toc_11">If</h3>

<h4 id="toc_12">if then:</h4>

<pre><code>if a == 37:
    print(&#39;yes, a is equal to 37&#39;)
</code></pre>

<pre><code>if a != 38: print(&#39;no, a is not equal to 38&#39;)
</code></pre>

<pre><code>if a &gt; 10:
    print(&#39;bigger than 10&#39;)
    print(&#39;yes&#39;)
    if a &gt; 20:
      print(&#39;really big&#39;)
    print(&#39;first level&#39;)
print(&#39;always&#39;) 
</code></pre>

<h4 id="toc_13">if then else</h4>

<pre><code>if a &gt; 10:
  print(&#39;bigger than 10&#39;)
else:
  print(&#39;less than or equal to 10\n&#39;)
</code></pre>

<p>a easier way to do the same thing</p>

<pre><code>print &#39;found&#39; if search(pattern,string) else &#39;not found&#39;
</code></pre>

<h4 id="toc_14">if else with multi branches</h4>

<pre><code>if a &lt; 5:
    print(&#39;smaller than 5&#39;)
elif a &lt; 10:
    print(&#39;smaller than 10&#39;)
elif a &lt; 15:
    print(&#39;smaller than 15&#39;)
else:
    print(&#39;I give up&#39;)
</code></pre>

<h3 id="toc_15">While Loop</h3>

<p><code>continue</code> to skip this loop, continue to next one</p>

<pre><code>a = 10
while a &gt; 0:
    a -= 1
    if a % 2 == 0: 
        continue # skip if a is even
    print(a)
print(&#39;this is no longer in the loop because not indented&#39;)
</code></pre>

<p><code>break</code> is to jump out of the whole loop, if <code>break</code> runs, <code>else</code> would not run, if <code>break</code> didn&#39;t run, <code>else</code> would run after the loop ends</p>

<pre><code>a = 0 
while a &gt; 3:
    if a == 2: 
        break
    print(a)
    a -= 1
else:
    print(&#39;made it to the end&#39;)
print(&#39;this is no longer in the loop because not indented&#39;)
</code></pre>

<h3 id="toc_16">For Loop</h3>

<p>for loop with range </p>

<pre><code>for i in range(0,10):
  print(i)
</code></pre>

<p>loop over elements in a list</p>

<pre><code>a = [&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;,&#39;f&#39;]
for i in a:
  print(i)
</code></pre>

<p>break and loop else</p>

<pre><code>for i in a:
  if i == &#39;c&#39;:
    print(&#39;I found a &quot;c&quot;&#39;)
    break
else:
  print(&#39;did not find a &quot;c&quot;&#39;)
</code></pre>

<p>multiple assignment </p>

<pre><code>a = [[&#39;a&#39;,1],[&#39;b&#39;,2],[&#39;c&#39;,3]]
for i,j in a:
    print(i,j)
</code></pre>

<p>zip ... very useful when traversing multiple parallel lists, print out square distance to origin   </p>

<pre><code>x = [2.643,5.2342,1.23]
y = [0.45,-2.3,0.56]
for ix,iy in zip(x,y):
    print(ix**2+iy**2)
</code></pre>

<h2 id="toc_17">Library</h2>

<h3 id="toc_18">import the whole library</h3>

<ol>
<li>import: <code>import math</code></li>
<li>use:</li>
</ol>

<pre><code>print(math.sin(2.343))  
print(math.sqrt(2))  
print(math.exp(0.234))
</code></pre>

<h3 id="toc_19">import some function from library</h3>

<ol>
<li>import:<code>math import sqrt, pi</code></li>
<li>use:</li>
</ol>

<pre><code>print(sqrt(2))
print(pi)
</code></pre>

<h3 id="toc_20">import all the functions from library</h3>

<ol>
<li>import:<code>from math import *</code></li>
<li>use:</li>
</ol>

<pre><code>print(pi)
print(sqrt(2))
print(exp(1))
print(e)
</code></pre>

<h3 id="toc_21">Note</h3>

<ol>
<li>the recommended way to import is the second one, <code>from library import functions</code></li>
<li>Find out what kind of function in one library

<ul>
<li>Google it</li>
<li>find it in <a href="https://docs.python.org/2.7/library/index.html">Python document </a></li>
<li>use following code</li>
</ul></li>
</ol>

<pre><code>import math
dir(math)
</code></pre>

<p>3.the function imported is just a variable, it can be overwrite by user</p>

<h2 id="toc_22">Reading and Writing</h2>

<h3 id="toc_23">Reading</h3>

<ol>
<li>open: <code>with open(&#39;in1.txt&#39;) as f:</code> like <code>if</code>, use space increment to denote the level, it would automatically close it when the code jump out of the level</li>
<li>error check: use <code>with</code> to do error check, if the file doesn&#39;t exist, it would report error</li>
<li>standard out:</li>
</ol>

<pre><code>from sys import stdout
with open(&#39;in1.txt&#39;) as f:
    n = 1
    for line in f:
        stdout.write(&#39;%d: %s&#39; % (n, line)) #overwrite each line, without /n and space
        n += 1
</code></pre>

<h4 id="toc_24">reading for use the file later</h4>

<p><code>fo = open(&quot;URLS1.txt&quot;, &quot;wb&quot;)</code></p>

<h4 id="toc_25">reading comma separated values and table</h4>

<p>read csv file</p>

<pre><code>import csv

with open(&#39;in2.csv&#39;) as f:
    for line in csv.reader(f):
        print(line)
</code></pre>

<p>read txt file in csv mode</p>

<pre><code>with open(&#39;in3.txt&#39;) as f:
    for line in csv.reader(f, delimiter=&#39; &#39;):
        print(line)
</code></pre>

<p>read comma separated values with headings into a dictionary, it would use the name of each column as key, and use the value in each line as value ,create some dictionary, the number of dictionary = the number of lines</p>

<pre><code>with open(&#39;in4.csv&#39;) as f:
    for line in csv.DictReader(f):
           print(line)
           print(&#39;Batch id: &#39; + line[&#39;batchID&#39;])
</code></pre>

<h3 id="toc_26">Writing</h3>

<ol>
<li>create a new file, if existed, overwrite: <code>with open(&#39;out.txt&#39;,&#39;w&#39;) as f:</code></li>
<li>append to the end of file: <code>with open(&#39;out.txt&#39;,&#39;a&#39;) as f:</code></li>
<li>write:<code>f.write(&#39;hi there\n&#39;)</code></li>
</ol>

<h2 id="toc_27">command-line arguments</h2>

<ol>
<li>it&#39;s a method to build your own command-line command you can add the option, parameter and help information </li>
<li>Create: <code>parser = argparse.ArgumentParser(description=&#39;Process some integers.&#39;)</code></li>
<li>Adding arguments: <code>parser.add_argument(&#39;integers&#39;, metavar=&#39;N&#39;, type=int, nargs=&#39;+&#39;, help=&#39;an integer for the accumulator&#39;)</code></li>
<li>use it:<code>parser.parse_args([&#39;--sum&#39;, &#39;7&#39;, &#39;-1&#39;, &#39;42&#39;])</code></li>
<li>Details about adding arguments: 

<ul>
<li>first is the name, use <code>-</code> or <code>--</code>to make it optional</li>
<li><code>nargs</code> defines the data structure of input value, <code>+</code> means put input value in a list</li>
<li><code>action</code> define the action for this variable </li>
<li><code>help</code> is for help information</li>
</ul></li>
<li>For more information, read the <a href="https://docs.python.org/2.7/library/argparse.html#the-add-argument-method">document</a> </li>
<li>Example</li>
</ol>

<pre><code>import argparse

parser = argparse.ArgumentParser(description=&#39;Process some integers.&#39;)
parser.add_argument(&#39;integers&#39;, metavar=&#39;N&#39;, type=int, nargs=&#39;+&#39;,
                    help=&#39;an integer for the accumulator&#39;)
parser.add_argument(&#39;--sum&#39;, dest=&#39;accumulate&#39;, action=&#39;store_const&#39;,
                    const=sum, default=max,
                    help=&#39;sum the integers (default: find the max)&#39;)

args = parser.parse_args()
print args.accumulate(args.integers)
</code></pre>

<h2 id="toc_28">Regular Expression</h2>

<h3 id="toc_29">Regular Expression syntax</h3>

<p>Find a full list <a href="https://zh.wikipedia.org/wiki/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">here</a><br/>
1. <code>\d</code> means digit (0 through 9)<br/>
2. <code>+</code>  means one or more character before <code>+</code>, <code>[a-z]+</code> means one or more lowercase letters<br/>
3. <code>[]</code> mens anyone in the <code>[]</code><br/>
4. <code>\w</code> means &quot;word character&quot; (A-Z, a-z, 0-9, _)<br/>
5. <code>\s</code> means &quot;whitespace&quot;  (space, tab, newline)<br/>
6. <code>\W</code> means NOT a &quot;word character&quot;<br/>
7. <code>\S</code> means NOT a &quot;whitespace&quot;<br/>
8. <code>*</code> zero or more any character<br/>
9. <code>.</code> anyone charcater<br/>
10. <code>^</code> begin with <code>^ab</code><br/>
11. <code>$</code> end with <code>ab$</code><br/>
12. <code>[a-zA-Z]</code> to match all letter in both cases<br/>
13. <code>{n}</code>: n times<br/>
    * <code>{n,}</code> equal or greater than n times<br/>
    * <code>{n,m}</code> n to m times<br/>
14. <code>[^xyz]</code> exclude xyz</p>

<h3 id="toc_30">function and other things</h3>

<ol>
<li>search function: use <code>search(pattern,string)</code> to find a substring in a string, if found return an address, if doesn&#39;t found, return none, need to use <code>from re import search, sub</code> to import</li>
<li>raw string: <code>pattern = r&#39;\d [a-z]+&#39;</code>good to use raw strings for regular expressions</li>
<li>group: 

<ul>
<li>use <code>()</code> to make a group, like <code>pattern = r&#39;([ACGT]+) ([a-z]+\s+\d)&#39;</code></li>
<li>use <code>search(pattern,string).group(1)</code> to return the matched group 1 result, etc</li>
<li>use <code>search(pattern,string).group(0)</code> to return all the matched result</li>
</ul></li>
<li>replacement: ``

<ul>
<li>use <code>sub(pattern, replacement, string)</code> to return the replaced string</li>
<li>but the original string is not changed, <code>string</code> is still like before</li>
</ul></li>
</ol>

<h2 id="toc_31">Function</h2>

<ol>
<li>define a function: <code>def a():</code>,  use space increment to denote the level</li>
<li>call a function:<code>a()</code></li>
<li>define a function with parameter: <code>def b(x,y):</code>, don&#39;t need to claim the type of the parameter like C</li>
<li>call a function with name arguments

<ul>
<li><code>b(y=&#39;there&#39;, x=&#39;hi&#39;)</code></li>
<li><code>b(&#39;hi&#39;,&#39;there&#39;)</code></li>
<li>they do the same thing</li>
</ul></li>
<li>return value: use <code>return x+y</code> to return</li>
<li>default arguments: <code>def c(x=&#39;defaultX&#39;, y=&#39;defaultY&#39;):</code> 

<ul>
<li>if call <code>c()</code> without input parameter, it would use default value to call the function</li>
<li>if call <code>c(4)</code> with only one value, it would use the value for x, and use default value for y</li>
</ul></li>
</ol>

<h2 id="toc_32">Exceptions</h2>

<ol>
<li>use <code>try except</code> to detect bug, see examples</li>
<li>your own exception:

<ul>
<li>define: <code>class MyVeryBadError(Exception): pass</code></li>
<li>raise: <code>raise MyVeryBadError</code></li>
<li>use <code>if</code> to set the condition to trigger the exception</li>
</ul></li>
<li></li>
</ol>

<h3 id="toc_33">Examples</h3>

<p>Example 1 single exception</p>

<pre><code>try:
    print(a[3])
    print(&#39;that went OK.&#39;)
except IndexError:
    print(&#39;Nice try.  list element does not exist.&#39;)
print(&#39;still chugging along.&#39;)
</code></pre>

<p>Example 2: multi-exception</p>

<pre><code>try:
    do_something_bad(23)
except IndexError:
    print(&#39;sorry, that list element does not exist&#39;)
except KeyError:
    print(&#39;that key does not exist&#39;)
except ZeroDivisionError:
    print(&#39;you are trying to divide by zero.&#39;)
except OverflowError:
    print(&#39;number is too big.&#39;)
except MyVeryBadError:
    print(&#39;oh NOOOOOO!!!&#39;)
</code></pre>

<p>Example 3 multi-exception</p>

<pre><code>try:
    do_something_bad(23)
except IndexError,KeyError,ZeroDivisionError:
    print(&#39;sorry, that list element does not exist&#39;)
</code></pre>

<p>Example 4 your own exception</p>

<pre><code>class MyVeryBadError(Exception): pass
  if (x &gt; 10):
      raise MyVeryBadError
  print(&#39;x is OK.&#39;)
</code></pre>

<h2 id="toc_34">Class</h2>

<ol>
<li> a way to bundle some functions and data</li>
<li><code>__init__(self, d)</code>: 

<ul>
<li>init function will always be called when you use the class, it&#39;s a system function</li>
<li>the first parameter is <code>self</code>, means the class self</li>
<li>the other parameters work like parameter in functions</li>
</ul></li>
<li>class is kind of like a module in library(like <code>import sqrt from math</code>), it&#39;s the bundle of functions, you can use the function inside a class by <code>classname.function</code> like library, class is like your own created module, a set of modules are like a library</li>
<li><code>subclass</code>: use <code>class B(A):</code> to define a subclass, B is a subclass, which inherits from A, it contains all the data and functions in A, and B can have something more</li>
<li>import your own library

<ul>
<li>use <code>from v3 import V3, distance</code> to import</li>
<li><code>v3</code> is the name of the file &quot;v3.py&quot;, V3 is the class name, distance is the function name, V3 and distance are both in &quot;v3.py&quot;</li>
</ul></li>
<li>use dir to know the function in a library:<code>dir(library name)</code></li>
</ol>

<h3 id="toc_35">Example</h3>

<p>v3.py</p>

<pre><code>from math import sqrt,acos

class V3:
    def __init__(self, x=0, y=0, z=0):
        self.x = x
        self.y = y
        self.z = z
    def __add__(a, b): return V3(a.x+b.x, a.y+b.y, a.z+b.z)
    def __sub__(a, b): return V3(a.x-b.x, a.y-b.y, a.z-b.z)
    def __repr__(self): return `self.x,self.y,self.z`
    def sq(self): return dot(self,self)
    def norm(self): return sqrt(self.sq())
    def scaled_by(self, a): return V3(a*self.x, a*self.y, a*self.z)
    def as_unit(self): return self.scaled_by(1.0/self.norm())
    def ident(self): return self

def dot(a, b): return a.x*b.x + a.y*b.y + a.z*b.z
def distance2(a, b): return (a-b).sq()
def distance(a, b): return sqrt(distance2(a,b))

def angle(a, b, c):
    t = dot((a-b).as_unit(), (c-b).as_unit())
    if (t &gt; 1):
        t = 1
    elif (t &lt; -1):
        t = -1
    return acos(t)
</code></pre>

<p>import and use your own class</p>

<pre><code>from v3 import V3, distance
a = V3(1,2,3)
b = V3(5,6,7)
</code></pre>

<h2 id="toc_36">Tips</h2>

<h3 id="toc_37">Virtual environment in bluehive</h3>

<ol>
<li>load:<code>module load python</code></li>
<li>enter bash mode:<code>bash</code></li>
<li>create:<code>virtualenv myenv</code></li>
<li>activate:<code>source myenv/bin/activate</code></li>
<li>use <code>pip</code> to install whatever your want</li>
<li>if you got Operation not permitted issue, use <code>sudo pip install --ignore-installed numpy</code> to ignore the installed package</li>
<li>use <code>sudo pip install pandas --no-deps</code> to install package without dependency </li>
</ol>

<h3 id="toc_38">Some useful command</h3>

<ol>
<li>getsizeof:<code>getsizeof()</code>, you can put a string or a list in ()</li>
<li>print string in a library: <code>v3.__doc__</code></li>
</ol>

<h2 id="toc_39">Web Script</h2>

<h3 id="toc_40">Get the html of a page</h3>

<ol>
<li>import:<code>from urllib2 import urlopen</code></li>
<li>get HTML of a page:</li>
</ol>

<pre><code>u=urlopen(&#39;http://www.chem.rochester.edu/about/directory.php&#39;).read()
</code></pre>

<h3 id="toc_41">parse</h3>

<ol>
<li>import:<code>from HTMLParser import HTMLParser</code></li>
<li>user should subclass HTMLParser and override its methods to implement the desired behavior</li>
<li>use feed to input the HTML:<code>MyHTMLParser().feed(u)</code></li>
<li>read more at <a href="https://docs.python.org/2.7/library/htmlparser.html?highlight=htmlparser">here</a></li>
<li>Subclass HTMLParser Example: get all links and verify each link</li>
</ol>

<pre><code>class MyHTMLParser(HTMLParser):#get all the link in that page
   def handle_starttag(self, tag, attrs):
       if tag == &#39;a&#39;: # HTML link
           attrs = dict(attrs)
           # print(attrs)
           # print(attrs[&#39;href&#39;])
           href=attrs[&#39;href&#39;]
           if href.startswith(&#39;http&#39;):
                # print(href)
                try:
                    print(&#39;try to open&#39;+ href)
                    print(href+&#39;is OK&#39;)
                except URLError:
                    print(href+&#39;is broken&#39;)
</code></pre>

<h3 id="toc_42">Static Web</h3>

<h4 id="toc_43">treat Function as a object</h4>

<p>use <code>@</code> to put a function into another function</p>

<pre><code>def fancier(f):
 def fancy_f():
   print(&#39;things are fancy now&#39;)
   f()
   print(&quot;that&#39;s all folks.&quot;)
 return fancy_f


@fancier # do samething as ordinary = fancier(ordinary)
def ordinary():
 print(&#39;hi there&#39;)
</code></pre>

<h4 id="toc_44">local host</h4>

<p>use flask to run a static webpage in your local host<br/>
Read more in <a href="media/15185360084766/hello.py">hello</a>  and <a href="media/15185360084766/run-hello.">run-hello</a></p>

<h2 id="toc_45">Panda</h2>

<p>Table manipulation<br/>
read more here <a href="media/15185360084766/pd.py">pd</a></p>

<h2 id="toc_46">Database</h2>

<h3 id="toc_47">Mini Database</h3>

<p>read more here <a href="media/15185360084766/shelve.">shelve</a></p>

<h3 id="toc_48">Database</h3>

<p>read more here <a href="http://docs.peewee-orm.com/en/latest/peewee/quickstart.html">peewee</a></p>


    

      </div>

      <div class="row">
        <div class="large-6 columns">
        <p class="text-left" style="padding:15px 0px;">
      
          <a href="15184667582573.html" 
          title="Previous Post: 2017电影十佳">&laquo; 2017电影十佳</a>
      
        </p>
        </div>
        <div class="large-6 columns">
      <p class="text-right" style="padding:15px 0px;">
      
          <a  href="15143560568992.html" 
          title="Next Post: 2017数码产品Top 5">2017数码产品Top 5 &raquo;</a>
      
      </p>
        </div>
      </div>
      <div class="comments-wrap">
        <div class="share-comments">
          

          
            <div id="disqus_thread"></div>
          

          
        </div>
      </div>
    </div><!-- article-wrap -->
  </div><!-- large 8 -->




 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>Joysisyphus Blog</h1>
                <div class="site-des">Our world is just another screen</div>
                <div class="social">






<a target="_blank" class="instagram" href="https://www.instagram.com/joysisyphus/" title="Instagram">Instagram</a>
<a target="_blank" class="weibo" href="https://weibo.com/2038201345" title="weibo">Weibo</a>


<a target="_blank" class="email" href="mailto:ymatustc@gmail.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15184960639692.html">一份很长的歌单</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15184939204005.html">信息输入自动化</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15184938992677.html">猜你喜欢的尽头：Pandora</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15184938887192.html">我的10/222 — — 观影2014</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15184931031349.html">2017电视剧十佳</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>


<script type="text/javascript">
    var disqus_shortname = 'joysisyphus'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<script type="text/javascript">
var disqus_shortname = 'joysisyphus'; 

(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    



  </body>
</html>
